# AiVedha Guard - GitHub Marketplace Listing

> **Complete copy-paste ready documentation for GitHub Marketplace submission**
>
> **Agreement Signed:** GitHub Marketplace Developer Agreement v2.4 (Nov 17, 2024)

---

## Table of Contents

1. [Listing Description Form](#1-listing-description-form)
2. [Logo and Feature Card](#2-logo-and-feature-card)
3. [Listing Details](#3-listing-details)
4. [Plans and Pricing](#4-plans-and-pricing)
5. [Security and Compliance](#5-security-and-compliance)
6. [Webhook Configuration](#6-webhook-configuration)
7. [Technical Integration](#7-technical-integration)

---

## 1. Listing Description Form

### Naming and Links

| Field | Value |
|-------|-------|
| **Listing name** | `AiVedha Guard` |
| **Very short description** | `AI sentinel guarding your digital realm from cyber threats` |
| **Primary category** | `Security` |
| **Secondary category** | `Code Scanning Ready` |
| **Supported languages** | `JavaScript, C++, Python, PHP, Java, C#, TypeScript, Swift, HTML, ASP.NET` |
| **Customer support URL** | `https://aivedha.ai/support` |
| **Setup URL (Post Installation)** | `https://aivedha.ai/dashboard` |
| **Company URL** | `https://www.aivibe.in` |
| **Status URL** | `https://api.aivedha.ai/api/auth/github/status` |
| **Documentation URL** | `https://aivedha.ai/faq#cicd-integration` |

### Copy-Paste Values

**Listing name:**
```
AiVedha Guard
```

**Very short description (125 char limit):**
```
AI sentinel guarding your digital realm from cyber threats
```

**Customer support URL:**
```
https://aivedha.ai/support
```

**Setup URL (Post Installation):**
```
https://aivedha.ai/dashboard
```

**Company URL:**
```
https://www.aivibe.in
```

**Status URL:**
```
https://api.aivedha.ai/api/auth/github/status
```

**Documentation URL (CI/CD Integration Guide):**
```
https://aivedha.ai/faq#cicd-integration
```

---

## 2. Logo and Feature Card

| Field | Value |
|-------|-------|
| **Badge background color** | `ffffff` |
| **Text color** | `Dark text` |
| **Background image dimensions** | `965px x 482px` |

### Logo Specifications
- **Format:** PNG with transparent background
- **Size:** 512x512px minimum
- **Location:** `https://aivedha.ai/aivibe/f3b0b32d-8f8e-4951-96d3-b02a7658a887.png`

### Badge background color:
```
ffffff
```

---

## 3. Listing Details

### Introductory description (500 char limit)

```
**AiVedha Guard** is your AI-powered cybersecurity sentinel.

Where shadows lurk in every byte, our guardian stands watch. Harnessing advanced machine learning and time-tested security principles, AiVedha Guard scans the invisible, unveils hidden vulnerabilities, and fortifies your digital fortress.

From SSL configurations to OWASP compliance, we illuminate every corner of your web domain — protecting code, infrastructure, and assets.

*Your peace of mind, one audit at a time.*
```

### Detailed description (Markdown supported)

```markdown
**AiVedha Guard** — your AI sentinel against cyber shadows.

In a world where threats lurk in every byte, AiVedha Guard stands vigilant. Our intelligent guardian scans the invisible, unveils hidden vulnerabilities, and fortifies your digital fortress with precision-crafted machine learning.

From SSL depths to OWASP peaks, we illuminate every corner of your web domain — delivering security scores, compliance reports, and remediation guidance. *Peace of mind, one audit at a time.*

## Capabilities

* AI-powered website security auditing & vulnerability detection
* OWASP Top 10 scanning for critical web application risks
* SSL/TLS certificate analysis & expiry monitoring
* HTTP security headers assessment (HSTS, CSP, X-Frame-Options, X-Content-Type-Options)
* Deep vulnerability detection for advanced threat identification
* Security score generation with risk-prioritised findings
* SOC2 & ISO compliance reporting
* Branded PDF reports & security certificates for stakeholder communication

## Benefits

* **Proactive Detection**: AI-driven risk scoring identifies vulnerabilities before attackers exploit them
* **OWASP Compliance**: Automated scanning ensures applications meet industry-recognised benchmarks
* **SSL/TLS Confidence**: Certificate validation, weak cipher detection & expiry alerts
* **Audit-Ready Reports**: Instant PDF reports & certificates for clients, audits & stakeholders
* **Enterprise Flexibility**: Scales from single audits to unlimited scanning across all environments

## Getting Started

1. **Install from GitHub Marketplace** - Select your plan
2. **Sign in with GitHub** - Authorize AiVedha Guard
3. **Enter your URL** - Website or API endpoint to scan
4. **Run Security Audit** - AI-powered scanning begins immediately
5. **Get Results** - Instant vulnerability report with remediation steps
6. **Download Certificate** - Verified security badge for your site

## Supported Scan Types

| Scan Type | Description |
|-----------|-------------|
| **OWASP Top 10** | SQL injection, XSS, CSRF, broken authentication |
| **SSL/TLS** | Certificate validity, cipher strength, protocol versions |
| **Security Headers** | CSP, HSTS, X-Frame-Options, X-Content-Type-Options |
| **DNS Security** | DNSSEC, SPF, DKIM, DMARC validation |
| **Exposed Files** | Sensitive configs, backups, debug files |
| **Server Fingerprinting** | Technology stack & version detection |

## Security Standards

- SOC 2 Type II compliant infrastructure
- ISO 27001 aligned processes
- GDPR compliant data handling
- Data encrypted at rest and in transit
- No credential storage - scan without providing passwords

## Support

- **Email**: support@aivedha.ai
- **Documentation**: https://aivedha.ai/faq#cicd-integration
- **Status**: https://api.aivedha.ai/api/auth/github/status

---

**Start protecting your websites today with AiVedha Guard.**
```

---

## 4. Plans and Pricing

### Plan 1: Aarambh (Free)

| Field | Value |
|-------|-------|
| **Plan name** | `Aarambh - Free Starter` |
| **Pricing model** | `Free` |
| **Available for** | `Personal accounts` |
| **Short description** | `Perfect for personal projects. 3 audit credits for 3 months with auto-reset.` |
| **Plan bullet 1** | `3 audit credits per quarter` |
| **Plan bullet 2** | `OWASP Top 10 vulnerability scanning` |
| **Plan bullet 3** | `SSL/TLS certificate analysis` |
| **Plan bullet 4** | `PDF security reports & certificates` |

**Plan name:**
```
Aarambh - Free Starter
```

**Short description:**
```
Perfect for personal projects. 3 audit credits for 3 months with auto-reset.
```

**Bullets:**
```
3 audit credits per quarter
```
```
OWASP Top 10 vulnerability scanning
```
```
SSL/TLS certificate analysis
```
```
PDF security reports & certificates
```

---

### Plan 2: Raksha (Starter)

| Field | Value |
|-------|-------|
| **Plan name** | `Raksha - Starter` |
| **Pricing model** | `Flat rate - $25.00 USD / month` |
| **Available for** | `Personal accounts, Organizations` |
| **Short description** | `Ideal for small teams. 10 audit credits monthly with API access.` |
| **Plan bullet 1** | `10 audit credits per month` |
| **Plan bullet 2** | `Full vulnerability scanning suite` |
| **Plan bullet 3** | `API access for CI/CD integration` |
| **Plan bullet 4** | `Priority email support` |

**Plan name:**
```
Raksha - Starter
```

**Short description:**
```
Ideal for small teams. 10 audit credits monthly with API access.
```

**Bullets:**
```
10 audit credits per month
```
```
Full vulnerability scanning suite
```
```
API access for CI/CD integration
```
```
Priority email support
```

---

### Plan 3: Suraksha (Professional)

| Field | Value |
|-------|-------|
| **Plan name** | `Suraksha - Professional` |
| **Pricing model** | `Flat rate - $50.00 USD / month` |
| **Available for** | `Personal accounts, Organizations` |
| **Short description** | `For growing businesses. 30 credits with scheduled audits and team features.` |
| **Plan bullet 1** | `30 audit credits per month` |
| **Plan bullet 2** | `Scheduled automated audits` |
| **Plan bullet 3** | `Team collaboration features` |
| **Plan bullet 4** | `White-label report option` |

**Plan name:**
```
Suraksha - Professional
```

**Short description:**
```
For growing businesses. 30 credits with scheduled audits and team features.
```

**Bullets:**
```
30 audit credits per month
```
```
Scheduled automated audits
```
```
Team collaboration features
```
```
White-label report option
```

---

### Plan 4: Vajra (Agency)

| Field | Value |
|-------|-------|
| **Plan name** | `Vajra - Agency` |
| **Pricing model** | `Flat rate - $150.00 USD / month` |
| **Available for** | `Organizations` |
| **Short description** | `Built for agencies. 100 credits with white-label branding and priority queue.` |
| **Plan bullet 1** | `100 audit credits per month` |
| **Plan bullet 2** | `White-label branded reports` |
| **Plan bullet 3** | `Priority scanning queue` |
| **Plan bullet 4** | `Dedicated account manager` |

**Plan name:**
```
Vajra - Agency
```

**Short description:**
```
Built for agencies. 100 credits with white-label branding and priority queue.
```

**Bullets:**
```
100 audit credits per month
```
```
White-label branded reports
```
```
Priority scanning queue
```
```
Dedicated account manager
```

---

### Plan 5: Chakra (Enterprise)

| Field | Value |
|-------|-------|
| **Plan name** | `Chakra - Enterprise` |
| **Pricing model** | `Flat rate - $300.00 USD / month` |
| **Available for** | `Organizations` |
| **Short description** | `Enterprise-grade security. 500 credits with SLA guarantee and dedicated support.` |
| **Plan bullet 1** | `500 audit credits per month` |
| **Plan bullet 2** | `Unlimited scheduled audits` |
| **Plan bullet 3** | `Custom SLA guarantee` |
| **Plan bullet 4** | `Enterprise SSO & integrations` |

**Plan name:**
```
Chakra - Enterprise
```

**Short description:**
```
Enterprise-grade security. 500 credits with SLA guarantee and dedicated support.
```

**Bullets:**
```
500 audit credits per month
```
```
Unlimited scheduled audits
```
```
Custom SLA guarantee
```
```
Enterprise SSO & integrations
```

---

## 5. Security and Compliance

### EU Digital Services Act Compliance

| Field | Value |
|-------|-------|
| **Trader Self-Certification** | `I do operate as a trader under EU regulations` |

**Select:**
```
I do operate as a trader under EU regulations
```

---

### Security Section

| Field | Value |
|-------|-------|
| **Privacy Policy URL** | `https://aivedha.ai/privacy` |
| **Terms of Service URL** | `https://aivedha.ai/terms` |
| **Third-party services required** | See below |
| **Repository visibility** | `Private` |

**Privacy Policy URL:**
```
https://aivedha.ai/privacy
```

**Terms of Service URL:**
```
https://aivedha.ai/terms
```

**Third-party services required:**
```
AWS Lambda (compute), AWS DynamoDB (database), AWS S3 (storage), AWS SES (email), PayPal (payments), Google reCAPTCHA (bot protection), Cloudflare (CDN/DNS)
```

**Repository visibility:**
```
Private
```

---

### Transparency Disclosures

```
## Security Measures

**Authentication Methods:**
- OAuth 2.0 via GitHub for user authentication
- JWT tokens for API session management
- No password storage - GitHub-only authentication

**Access Controls:**
- Role-based access control (RBAC) for team features
- User-scoped data isolation in DynamoDB
- API rate limiting: 100 requests/minute per user

**Incident Response:**
- 24/7 automated monitoring via AWS CloudWatch
- Security incident escalation within 4 hours
- Email notification to affected users within 24 hours
- Post-incident reports published within 7 days

## Data Handling

**Data Encryption:**
- TLS 1.3 encryption in transit
- AES-256 encryption at rest (AWS managed keys)
- No plaintext credential storage

**Data Collection:**
- GitHub user ID, email, and profile name
- Audit target URLs (user-provided)
- Scan results and security scores
- No source code access or storage

**Data Retention:**
- Active accounts: Audit reports retained 12 months
- Deleted accounts: Data purged within 30 days
- GDPR/CCPA compliant deletion on request

**Data Sharing:**
- No data sold to third parties
- Anonymised aggregated statistics only
- PayPal receives payment info only

## AI/ML Compliance (EU AI Act)

**Risk Classification:** Low-risk (security tooling)

**AI Capabilities:**
- Vulnerability pattern recognition
- Risk scoring and prioritisation
- Remediation recommendation generation

**Human Oversight:**
- All AI findings presented as recommendations
- Users decide which actions to take
- No automated remediation without user consent

**Transparency:**
- AI-generated content clearly labelled
- Confidence scores provided for findings
- Explainable reasoning for risk assessments

## Compliance Certifications

- SOC 2 Type II aligned infrastructure (AWS)
- ISO 27001 aligned processes
- GDPR compliant data handling
- CCPA compliant for California residents
- PCI-DSS compliant payment processing (via PayPal)
```

---

## 6. Webhook Configuration

### Webhook Settings

| Field | Value |
|-------|-------|
| **Payload URL** | `https://api.aivedha.ai/api/auth/github` |
| **Content type** | `application/json` |
| **Secret** | (Store in AWS Secrets Manager: `aivedha/github-oauth` key: `webhook_secret`) |
| **Active** | `Yes` |

**Payload URL:**
```
https://api.aivedha.ai/api/auth/github
```

**Content type:**
```
application/json
```

**Secret storage location:**
```
AWS Secrets Manager: aivedha/github-oauth (key: webhook_secret)
```

---

### Webhook Events to Subscribe

```
marketplace_purchase
```

### Event Actions Handled

| Event | Action | Handler |
|-------|--------|---------|
| `marketplace_purchase` | `purchased` | Create/upgrade subscription, add credits |
| `marketplace_purchase` | `changed` | Update plan, adjust credits |
| `marketplace_purchase` | `cancelled` | Downgrade to free, mark cancelled |
| `marketplace_purchase` | `pending_change` | Queue plan change for next billing |
| `marketplace_purchase` | `pending_change_cancelled` | Cancel pending change |

### Webhook Signature Verification

The Lambda validates webhook signatures using HMAC-SHA256:
```python
# Signature header: X-Hub-Signature-256
# Validation: hmac.compare_digest(signature, 'sha256=' + hmac.new(secret, body, sha256).hexdigest())
```

---

## 7. Technical Integration

### GitHub App Configuration

| Setting | Value |
|---------|-------|
| **GitHub App name** | `AiVedha Guard` |
| **Homepage URL** | `https://aivedha.ai` |
| **Callback URL (OAuth)** | `https://aivedha.ai/auth/github/callback` |
| **Setup URL (Post Installation)** | `https://aivedha.ai/dashboard` |
| **Webhook URL** | `https://api.aivedha.ai/api/auth/github` |

### GitHub OAuth App Credentials

| Setting | Value |
|---------|-------|
| **Client ID** | `Ov23liBt25IV3LcMI4fC` |
| **Client Secret** | (Stored in AWS Secrets Manager: `aivedha/github-oauth`) |
| **Authorization URL** | `https://github.com/login/oauth/authorize` |
| **Token URL** | `https://github.com/login/oauth/access_token` |

### OAuth Permissions Required

| Permission | Access Level | Purpose |
|------------|--------------|---------|
| **Email addresses** | Read-only | User identification and notifications |
| **Profile information** | Read-only | Display name and avatar |

### API Endpoints (Production)

| Endpoint | Method | Purpose |
|----------|--------|---------|
| `https://api.aivedha.ai/api/auth/github` | POST | Exchange OAuth code for user session |
| `https://api.aivedha.ai/api/auth/github/status` | GET | Check GitHub integration status (health check) |
| `https://api.aivedha.ai/api/auth/github` | POST (with X-GitHub-Event header) | Handle marketplace webhook events |
| `https://api.aivedha.ai/api/audit/start` | POST | Start security audit (requires auth) |
| `https://api.aivedha.ai/api/audit/status/{id}` | GET | Get audit progress/results |
| `https://api.aivedha.ai/api/credits/balance` | GET | Get user's credit balance |

### Installation Flow (Fully Automated - Zero Manual Steps)

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    GITHUB MARKETPLACE INSTALLATION                      │
│                     (100% Automated - No Hurdles)                       │
└─────────────────────────────────────────────────────────────────────────┘

1. User clicks "Install" on GitHub Marketplace
   │
2. User selects plan (Aarambh Free / Raksha / Suraksha / Vajra / Chakra)
   │
3. GitHub processes payment (if paid plan)
   │
4. GitHub sends marketplace_purchase webhook
   │   POST https://api.aivedha.ai/api/auth/github
   │   Header: X-GitHub-Event: marketplace_purchase
   │
   ├──────────────────────────────────────────────────────────────────────┐
   │  AUTOMATIC BACKEND PROCESSING (Lambda Handler)                       │
   │  ─────────────────────────────────────────────────────────────────── │
   │  ✅ Check if user exists by GitHub ID                                │
   │  ✅ NEW USER: Create account with marketplace plan & credits         │
   │  ✅ EXISTING USER: Update plan and add credits                       │
   │  ✅ AUTO-GENERATE API KEY (90-day validity, avg_live_xxx...)         │
   │  ✅ SEND WELCOME EMAIL with:                                         │
   │      - API key (displayed only in email - save it!)                  │
   │      - GitHub Actions workflow template                              │
   │      - Step-by-step setup instructions                               │
   │      - Direct links to dashboard                                     │
   └──────────────────────────────────────────────────────────────────────┘
   │
5. User receives welcome email with API key (within seconds)
   │
6. User copies API key and adds to GitHub Secrets:
   │   Repository → Settings → Secrets → Actions → AIVEDHA_API_KEY
   │
7. User adds workflow file to any repository (.github/workflows/)
   │
8. ✅ CI/CD READY - Security audits run automatically on every push!
   │
   ╔══════════════════════════════════════════════════════════════════════╗
   ║  OPTIONAL: Complete OAuth for dashboard access                       ║
   ╠══════════════════════════════════════════════════════════════════════╣
   ║  9. User visits https://aivedha.ai and clicks "Sign in with GitHub"  ║
   ║  10. GitHub OAuth flow authenticates user                            ║
   ║  11. Lambda links OAuth to existing marketplace account              ║
   ║  12. User sees full dashboard with audit history & reports           ║
   ╚══════════════════════════════════════════════════════════════════════╝
```

### Key Automation Features

| Feature | Description |
|---------|-------------|
| **Auto Account Creation** | User account created instantly on marketplace install webhook |
| **Auto API Key Generation** | 90-day API key generated automatically, emailed to user |
| **Auto Email Delivery** | Welcome email with API key + workflow template sent immediately |
| **Auto Plan Activation** | Plan and credits activated based on marketplace selection |
| **Multi-Project Support** | Same API key works across unlimited repositories |
| **No OAuth Required** | API key works for CI/CD without completing web OAuth flow |
| **Regeneratable Keys** | Users can create additional keys from profile (max 5) |
| **Email-Based Sync** | Marketplace account synced with aivedha.ai via GitHub email |

### API Key Auto-Generation Details

```
Auto-Generated API Key Format: avg_live_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

Storage:
- Key hash stored in DynamoDB (actual key never stored)
- Key prefix shown in profile: avg_live_xxxx...

Permissions Granted:
- audit:create    → Start security audits via API
- audit:read      → Retrieve audit results
- audit:status    → Check audit progress
- report:download → Download PDF security reports
- certificate:read → View security certificates

Validity: 90 days from generation
Usage Limit: Each audit consumes 1 credit
```

### GitHub Actions Workflow Integration

**Step 1:** After receiving welcome email, copy your API key

**Step 2:** Add to GitHub Secrets
```
Repository → Settings → Secrets and variables → Actions → New repository secret
Name: AIVEDHA_API_KEY
Value: avg_live_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

**Step 3:** Create workflow file `.github/workflows/security-audit.yml`:

```yaml
name: AiVedha Security Audit

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:  # Manual trigger
  schedule:
    - cron: '0 0 * * 1'  # Weekly Monday midnight UTC

jobs:
  security-audit:
    runs-on: ubuntu-latest
    steps:
      - name: Run AiVedha Guard Security Audit
        id: audit
        run: |
          response=$(curl -s -X POST https://api.aivedha.ai/api/cicd/audit \
            -H "X-API-Key: ${{ secrets.AIVEDHA_API_KEY }}" \
            -H "Content-Type: application/json" \
            -d '{"url": "${{ vars.SITE_URL || 'https://your-site.com' }}", "source": "github", "github_repository": "${{ github.repository }}", "github_run_id": "${{ github.run_id }}"}')
          echo "response=$response" >> $GITHUB_OUTPUT
          echo "Audit Response: $response"

      - name: Check Audit Status
        run: |
          echo "Audit initiated. Check your email for detailed results."
          echo "Dashboard: https://aivedha.ai/dashboard"
```

**Step 4:** (Optional) Add repository variable for your site URL:
```
Repository → Settings → Variables → Actions → New repository variable
Name: SITE_URL
Value: https://your-production-site.com
```

### User Journey (Zero Friction)

```
┌─────────────────────────────────────────────────────────────────┐
│  FROM MARKETPLACE INSTALL TO FIRST AUDIT: < 5 MINUTES          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. Install from GitHub Marketplace (30 seconds)                │
│     └─→ Select plan, authorize, done                            │
│                                                                 │
│  2. Check email for API key (instant)                           │
│     └─→ Welcome email with key + instructions                   │
│                                                                 │
│  3. Add secret to GitHub repo (1 minute)                        │
│     └─→ Settings → Secrets → AIVEDHA_API_KEY                    │
│                                                                 │
│  4. Create workflow file (2 minutes)                            │
│     └─→ Copy template from email, customize URL                 │
│                                                                 │
│  5. Push code → Security audit runs! (automatic)                │
│     └─→ Results emailed with PDF report & score                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### API Key Management

**View/Regenerate Keys:**
- Dashboard: https://aivedha.ai/profile → API Keys section
- Maximum 5 active keys per user
- Keys can be revoked anytime
- New keys can be generated with custom validity (7-90 days)

**Key Security:**
- Keys shown only once (at creation or in welcome email)
- Only key hash stored in database
- Keys prefixed with `avg_live_` for identification
- Rate limited: 100 requests/minute per key

### Webhook Payload Examples

**Purchase Event:**
```json
{
  "action": "purchased",
  "marketplace_purchase": {
    "account": {
      "id": 12345678,
      "login": "username",
      "type": "User",
      "email": "user@example.com"
    },
    "plan": {
      "id": 1234,
      "name": "Raksha - Starter",
      "monthly_price_in_cents": 2500
    },
    "billing_cycle": "monthly"
  },
  "sender": {
    "id": 12345678,
    "login": "username"
  }
}
```

**Cancellation Event:**
```json
{
  "action": "cancelled",
  "marketplace_purchase": {
    "account": {
      "id": 12345678,
      "login": "username",
      "type": "User"
    },
    "plan": {
      "id": 1234,
      "name": "Raksha - Starter"
    }
  },
  "effective_date": "2025-01-25T00:00:00Z"
}
```

---

## Quick Reference Card

### URLs to Configure in GitHub App Settings

| Purpose | URL |
|---------|-----|
| Homepage URL | `https://aivedha.ai` |
| Callback URL (OAuth) | `https://aivedha.ai/auth/github/callback` |
| Setup URL (Post Installation) | `https://aivedha.ai/dashboard` |
| Webhook URL | `https://api.aivedha.ai/api/auth/github` |

### URLs to Configure in Marketplace Listing

| Purpose | URL |
|---------|-----|
| Customer support URL | `https://aivedha.ai/support` |
| Documentation URL | `https://aivedha.ai/faq#cicd-integration` |
| Status URL | `https://api.aivedha.ai/api/auth/github/status` |
| Privacy Policy URL | `https://aivedha.ai/privacy` |
| Terms of Service URL | `https://aivedha.ai/terms` |
| Company website | `https://www.aivibe.in` |

### Plan Summary

| Plan | Price | Credits | Best For |
|------|-------|---------|----------|
| Aarambh | Free | 3/quarter | Personal projects |
| Raksha | $25/mo | 10/month | Small teams |
| Suraksha | $50/mo | 30/month | Growing businesses |
| Vajra | $150/mo | 100/month | Agencies |
| Chakra | $300/mo | 500/month | Enterprises |

---

## 8. AWS Infrastructure Configuration (Verified)

> **Last Verified:** December 25, 2025
> **API Gateway Deployment:** `nhw47y` (prod stage)

### API Gateway Configuration

| Setting | Value |
|---------|-------|
| **API ID** | `btxmpjub05` |
| **API Name** | `AiVedha-Guardian-API` |
| **Stage** | `prod` |
| **Endpoint Type** | Regional |
| **Custom Domain** | `api.aivedha.ai` |
| **Base URL** | `https://api.aivedha.ai/api` |

### Registered API Routes (All Active)

| Route | Resource ID | Method | Lambda Function | CORS |
|-------|-------------|--------|-----------------|------|
| `/api/auth/github` | `aio1pi` | POST | `aivedha-guardian-github-auth` | ✅ |
| `/api/auth/github/status` | `vdn0ys` | GET | `aivedha-guardian-github-auth` | ✅ |
| `/api/cicd/audit` | `x45f3b` | POST | `aivedha-api-key-manager` | ✅ |
| `/api/api-keys/create` | `eei03t` | POST | `aivedha-api-key-manager` | ✅ |
| `/api/api-keys/list` | `5s9h5m` | GET | `aivedha-api-key-manager` | ✅ |
| `/api/api-keys/revoke` | `oq7za5` | POST | `aivedha-api-key-manager` | ✅ |
| `/api/api-keys/validate` | `unb9s8` | POST | `aivedha-api-key-manager` | ✅ |
| `/api/audit/start` | `4e7v7q` | POST | `aivedha-guardian-security-crawler` | ✅ |
| `/api/health` | `8sq9ev` | GET | Health Check | ✅ |

### Lambda Functions

| Function Name | Runtime | Memory | Timeout | Status |
|---------------|---------|--------|---------|--------|
| `aivedha-guardian-github-auth` | Python 3.11 | 128 MB | 30s | Active |
| `aivedha-api-key-manager` | Python 3.11 | 128 MB | 30s | Active |
| `aivedha-guardian-security-crawler` | Python 3.11 | 512 MB | 300s | Active |

### Lambda Environment Variables (GitHub Auth)

| Variable | Value |
|----------|-------|
| `GITHUB_CLIENT_ID` | `Ov23liBt25IV3LcMI4fC` |
| `GITHUB_CLIENT_SECRET` | (Configured in Lambda) |
| `USERS_TABLE` | `aivedha-guardian-users` |
| `API_KEYS_TABLE` | `aivedha-guardian-api-keys` |
| `API_KEY_SECRET` | `aivedha-api-key-secret-2024-v1` |
| `SITE_URL` | `https://aivedha.ai` |

### Lambda IAM Role Permissions

| Policy | ARN | Purpose |
|--------|-----|---------|
| `AmazonDynamoDBFullAccess` | `arn:aws:iam::aws:policy/AmazonDynamoDBFullAccess` | Read/write to all DynamoDB tables |
| `AmazonSESFullAccess` | `arn:aws:iam::aws:policy/AmazonSESFullAccess` | Send welcome emails with API keys |
| `AWSLambda_FullAccess` | `arn:aws:iam::aws:policy/AWSLambda_FullAccess` | Invoke security crawler Lambda |
| `AmazonS3FullAccess` | `arn:aws:iam::aws:policy/AmazonS3FullAccess` | Store/retrieve PDF reports |
| `AWSLambdaBasicExecutionRole` | `arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole` | CloudWatch logging |

### DynamoDB Tables

| Table Name | Primary Key | GSIs |
|------------|-------------|------|
| `aivedha-guardian-users` | `user_id` | `email-index`, `github-id-index`, `status-created-index` |
| `aivedha-guardian-api-keys` | `api_key_id` | `user-id-index`, `api-key-hash-index` |
| `aivedha-guardian-audit-reports` | `report_id` | Multiple indexes |
| `aivedha-guardian-subscriptions` | `subscription_id` | `user-id-index` |
| `aivedha-guardian-credits` | `transaction_id` | `user-id-index` |

### CORS Configuration

```
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: Content-Type, Authorization, X-API-Key
Access-Control-Allow-Methods: GET, POST, OPTIONS
```

### Endpoint Verification Results

```bash
# Health Check
curl https://api.aivedha.ai/api/health
→ {"status":"healthy","service":"aivedha-guardian","region":"us-east-1"}

# GitHub Status
curl https://api.aivedha.ai/api/auth/github/status
→ {"status":"active","service":"AiVedha Guardian","health":"healthy",...}

# Webhook Ping Test
curl -X POST https://api.aivedha.ai/api/auth/github \
  -H "X-GitHub-Event: ping" \
  -d '{"zen":"test","hook_id":12345}'
→ {"message":"pong","zen":"test","hook_id":12345}

# API Key Validation (expected failure for invalid key)
curl -X POST https://api.aivedha.ai/api/api-keys/validate \
  -H "X-API-Key: invalid-key"
→ {"valid":false,"error":"Invalid or expired API key"}

# CI/CD Audit (expected failure for invalid key)
curl -X POST https://api.aivedha.ai/api/cicd/audit \
  -H "X-API-Key: invalid-key" \
  -d '{"url":"https://example.com"}'
→ {"error":"Invalid or expired API key","message":"Please generate a new API key..."}
```

### 404 Handling

Unregistered routes return:
```json
{"message": "Missing Authentication Token"}
```
This is expected API Gateway behavior - no route information is leaked.

---

## Pre-Submission Checklist

### GitHub App Settings
```
[x] App name: AiVedha Guard
[x] Homepage URL: https://aivedha.ai
[x] Callback URL: https://aivedha.ai/auth/github/callback
[x] Setup URL: https://aivedha.ai/dashboard
[x] Webhook URL: https://api.aivedha.ai/api/auth/github
[x] Webhook secret configured in Lambda environment
[x] OAuth permissions: user:email (read-only)
```

### Marketplace Listing
```
[ ] Listing name: AiVedha Guard (13 characters)
[ ] Very short description (58 characters - under 125 limit)
[ ] Primary category: Security
[ ] Secondary category: Code Scanning Ready
[ ] All URLs tested and accessible
[ ] Logo uploaded (512x512 PNG, transparent background)
[ ] Feature card background (965x482 px)
[ ] Badge background color: ffffff
[ ] All 5 plans configured with bullets
[ ] Privacy Policy URL: https://aivedha.ai/privacy
[ ] Terms of Service URL: https://aivedha.ai/terms
[ ] Third-party services listed
[ ] Transparency disclosures complete
```

### Webhook Testing
```
[ ] Webhook URL responds to ping event
[ ] Webhook signature validation working
[ ] marketplace_purchase:purchased event handled
[ ] marketplace_purchase:changed event handled
[ ] marketplace_purchase:cancelled event handled
[ ] User credits updated on purchase
[ ] Plan changes reflected in DynamoDB
```

### End-to-End Testing
```
[ ] OAuth flow: GitHub -> Callback -> Dashboard
[ ] New user: Account created with 3 free credits
[ ] Existing user: Account linked, credits preserved
[ ] Paid plan: Credits added based on plan tier
[ ] API key generation working
[ ] Security audit runs successfully
[ ] PDF report generated
```

---

**Developer:** AiVibe Software Services Pvt Ltd
**Contact:** support@aivedha.ai
**Version:** 2.1.0
**Last Updated:** December 25, 2025
